---
layout: post
title:  "阈值报警"
categories: galaxy
author: "王耕"
---

**区域阈值报警功能**

  ![]({{site.mirror_url}}/assets/uploads/2015-02-25-alarm1.jpg)
  
  ![]({{site.mirror_url}}/assets/uploads/2015-02-25-alarm2.jpg)

  
  1.区域上某个监测指标设置阈值（上限下限），超过阈值后报警，报警方式可以是邮件，短信。一个区域设置阈值后，子区域继承父区域的设置。
  2.报警内容精确翔实。如：陶器库温度高于阈值达到40(℃)，采集设备为温湿度（610101010010101）8月23日14时45分。

**报警机制**
  1.是否超过阈值后每次都报警
  2.从超阈值状态恢复到正常是否报警（一次就可以了）
  3.子区域设置阈值后覆盖父区域的阈值条件，子区域触发规则后，不会再触发父区域报警。
  4.可选的设置免打扰时段（默认PM22:00~AM7:00）


  阈值颠簸会出现频繁报警。可选方案可以是：30分钟内，第一次报警即时通知（上下限为15~30），接下来报警的上下限加一个增量，上下限为15（+-1）~30（+-1），超过31才报警，低于29回复正常。此问题galaxy 2.0 考虑处理。

  遗留问题：一个区域下有两个设备，一个总是超过阈值，一个正常。设备交替上传数据，一个报警了，一个又恢复正常。无限循环下去。


  为了方便，可考虑站点有默认的阈值报警，同时可根据地形纬度适当调整。